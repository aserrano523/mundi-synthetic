<!DOCTYPE html>
<!--
  Documento: index.html
  Proyecto: Mundi Synthetic – Blog sobre VR y Robótica
  Propósito: Página de inicio que lista las entradas del blog.
  Notas de arquitectura:
  - La cabecera (header) se carga dinámicamente desde /partials/header.html
    para reutilizarla en todas las páginas y evitar duplicación.
  - El script principal (js/main.js) se inyecta tras montar el header para
    garantizar que los listeners referencian nodos ya presentes en el DOM.
  - Se detecta si la página está en subcarpeta para ajustar rutas relativas.
-->

<html lang="es">
<head>
  <!--
    Correcta declaración de codificación y viewport para
    compatibilidad con móviles (responsive).
  -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!--
    Título orientado a SEO: incluye marca del blog + temática principal.
  -->
  <title>Mundi Synthetic – Blog sobre VR y Robótica</title>

  <!--
    Favicon propio del proyecto (branding consistente).
  -->
  <link rel="icon" href="img/logo-mundi-synthetic.png" type="image/png">

  <!--
    Hoja de estilos global del sitio. Mantiene la separación vista en clase:
    HTML (estructura), CSS (presentación) y JS (comportamiento).
  -->
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!--
    Marcador donde se inyectará la cabecera común (navegación, logo, etc.)
    tras la carga asíncrona. Este enfoque:
      - Evita duplicar el header en cada HTML.
      - Facilita cambios globales (un único archivo partials/header.html).
      - Reduce errores de coherencia en navegación.
  -->
  <div id="header-placeholder"></div>

  <script>
    (async () => {
      // Detecta si estás en GitHub Pages (proyecto) y fija la base
      const repoBase = location.pathname.startsWith('/mundi-synthetic/')
        ? '/mundi-synthetic/'
        : '/';

      // Detecta si estamos en subcarpeta (por ejemplo: /posts/post-x.html)
      const headerPath = repoBase + 'partials/header.html';
      const mainJsPath = repoBase + 'js/main.js';

      try {
        const response = await fetch(headerPath);
        if (!response.ok) throw new Error(response.status + ' ' + response.statusText);
        const html = await response.text();
        // Inserta el header común (navegación, logo, toggle de dark mode, etc.)
        document.getElementById('header-placeholder').innerHTML = html;

        // Carga main.js solo después de insertar el header
        // (garantiza que el botón de modo oscuro y otros listeners encuentren sus nodos)
        const script = document.createElement('script');
        script.src = mainJsPath;
        script.defer = true; // no bloquea el parseo del documento
        document.body.appendChild(script);
      } catch (err) {
        // Degradación elegante: el contenido sigue accesible aunque no se pinte el header
        console.error('Error cargando header:', headerPath, err);
      }
    })();
  </script>

  <!--
    Contenido principal del índice del blog.
    Patrón semántico:
      - <main> como región principal.
      - Cada entrada se modela como <article>, con imagen, título y resumen.
      - Los títulos enlazan a las páginas de detalle (posts).
    Accesibilidad:
      - Se incluyen atributos alt en las imágenes (descripción básica del contenido).
        Importante también para el SEO.
      - Encabezados jerárquicos (<h2>) para navegabilidad por lectores de pantalla.
  -->
  <main class="blog-container">
    <article class="post">
      <!--
        Imagen representativa de la entrada. El alt describe la función visual;
        evita textos “imagen de…” redundantes si el contexto es obvio.
      -->
      <img src="img/portada-vr-robotica.png" alt="Imagen del post 1">
      <!--
        Título de la entrada. El <a> enlaza al detalle.
        Buenas prácticas SEO: el texto del enlace es descriptivo, no “leer más”.
      -->
      <h2><a href="post-vr-robotica.html">Realidad virtual y robótica: control y colaboración</a></h2>
      <!--
        Resumen (teaser) de la entrada. Favorece el escaneo rápido por parte del usuario.
      -->
      <p>Arquitectura y prácticas para integrar Unity (OpenXR), Meta Quest 2 y ROS 2, con enfoque en diseño de interfaz inmersiva y reducción de latencia para control en tiempo real.</p>
    </article>

    <!-- Artículo 2 -->
    <article class="post">
      <img src="img/portada-gemelos-digitales.jpg" alt="Imagen del post 2">
      <h2><a href="post-gemelos-digitales.html">Gemelos digitales: el paso previo al mundo real</a></h2>
      <p>Uso de gemelos digitales en Gazebo y Unity para validar interacciones humano-robot, probar algoritmos y escenarios antes del despliegue físico con ROS 2.</p>
    </article>

    <!-- Artículo 3 -->
    <article class="post">
      <img src="img/portada-robot-teleoperation.jpeg" alt="Imagen del post 3">
      <h2><a href="post-teleoperacion.html">Teleoperación inmersiva con WebRTC, ROS 2 y realidad virtual</a></h2>
      <p>Descripción de la teleoperación inmersiva: WebRTC para vídeo y DataChannels, integración con ROS 2 y MoveIt 2, requisitos de latencia, sincronización, seguridad y casos de uso.</p>
    </article>
  </main>

  <!--
    Pie de página con atribución y contexto docente.
    Incluye marca temporal (© 2025) y referencia a la asignatura / tecnologías usadas.
  -->
  <footer>
    <p>
      © 2025 Mundi Synthetic. Blog sobre Realidad virtual y simulación con robots.<br>
      Proyecto educativo – HTML, CSS y JS – en la asignatura <br>
      Desarrollo de Aplicaciones en Red del Grado de Ingeniería Informática.
    </p>
  </footer>
</body>
</html>
